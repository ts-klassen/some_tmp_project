# 問題作成タスク一覧（フェーズ 1〜5）

本書は「8 時間完結 PostgreSQL SQL 演習課題」において  
問題ファイル整備まで（フェーズ 1〜5）を完了させるための具体的な作業指示書です。  
担当者・期限などは **TODO** 行を随時更新してください。

---

## フェーズ 1：出題方針の最終確定

| #   | 作業内容                                                   | 成果物                                     | 担当 | 期限 |
|-----|------------------------------------------------------------|--------------------------------------------|------|------|
| 1‑1 | 問題数・難易度比率を確定（例：易 5、普 8、難 5）           | `docs/outlines/difficulty_ratio.md`        |      |      |
| 1‑2 | 学習トピック一覧と難易度マッピング                         | `docs/outlines/topic_map.md`               |      |      |
| 1‑3 | 目標解答時間を設定（易 10min / 普 20min / 難 25min）       | 上記ファイルに追記                         |      |      |
| 1‑4 | レビュー用ミーティングで承認を得る                         | 議事録 `meeting_notes/phase1.md`           |      |      |

---

## フェーズ 2：問題ドラフト作成

| #   | 作業内容                                                             | 成果物                          | 担当 | 期限 |
|-----|----------------------------------------------------------------------|---------------------------------|------|------|
| 2‑1 | 各問題の日本語説明文（Markdown）初稿作成                             | `drafts/problem_XX.md`          |      |      |
| 2‑2 | 可変パラメータの有無を決定（例：指定月）                             | 各問題ドラフト内に注記          |      |      |
| 2‑3 | 用語統一リスト作成（売上／数量など）                                 | `docs/glossary.md`              |      |      |
| 2‑4 | ドラフト一括レビュー                                                 | `review_logs/phase2.md`         |      |      |

---

## フェーズ 3：正答 SQL 作成

| #   | 作業内容                                                      | 成果物                              | 担当 | 期限 |
|-----|---------------------------------------------------------------|-------------------------------------|------|------|
| 3‑1 | psql で正答 SQL を実装                                        | `answers/XX.sql`                    |      |      |
| 3‑2 | 代表的な誤答パターンを検証                                    | `tests/wrong_patterns/XX.sql`       |      |      |
| 3‑3 | 実行時間測定 (`\timing`) & パフォーマンス確認                  | 測定ログ `perf_logs/XX.txt`         |      |      |
| 3‑4 | コーディング規約チェック（大文字/小文字等）                   | `answers/` 内で統一                 |      |      |

---

## フェーズ 4：期待結果（正答データ）取得

| #   | 作業内容                                                                                     | 成果物                                | 担当 | 期限 |
|-----|----------------------------------------------------------------------------------------------|---------------------------------------|------|------|
| 4‑1 | `\copy ( <正答SQL> ) TO expected_results/problem_XX.csv CSV`                                 | `expected_results/XX.csv`             |      |      |
| 4‑2 | ORDER BY 追加など結果セット固定                                                               | 同上                                  |      |      |
| 4‑3 | 行数が多すぎる場合の比較方法検討                                                             | `docs/compare_strategy.md`            |      |      |
| 4‑4 | NULL, 空文字の扱い確認                                                                       | 更新済み CSV & ドキュメント           |      |      |

---

## フェーズ 5：問題ファイル整備

| #   | 作業内容                                                                                                     | 成果物                          | 担当 | 期限 |
|-----|--------------------------------------------------------------------------------------------------------------|---------------------------------|------|------|
| 5‑1 | 問題テンプレート確定                                                                                        | `templates/problem_template.md` |      |      |
| 5‑2 | 各問題ファイルをテンプレに合わせて整形                                                                      | `problems/problem_XX.md`        |      |      |
| 5‑3 | セクション構成を統一<br>・タイトル<br>・説明文<br>・制約事項<br>・想定出力例（先頭 5 行）<br>・学習トピック / 難易度 | 完成済み問題ファイル            |      |      |
| 5‑4 | 連番・ファイル名チェックスクリプト実行                                                                      | `scripts/check_filenames.sh`     |      |      |
| 5‑5 | Markdown レンダリング確認（VS Code / GitHub 上）                                                             | スクリーンショットまたはチェックリスト |      |      |

---

### 問題ファイルテンプレート例（`templates/problem_template.md`）

```markdown
# 07 平均価格より高い商品の一覧

**難易度**：★★  
**学習トピック**：サブクエリ

## 説明
全商品の平均価格を計算し、  
平均価格より高い商品の `id`, `name`, `price` を価格降順で表示してください。

## 制約
* 必ず `ORDER BY price DESC` を付けること
* NULL 値は考慮不要

## 想定出力例（先頭 5 行）

| id | name            | price |
|----|-----------------|-------|
| 23 | High-end Laptop | 240000 |
| 45 | 4K Monitor      |  85000 |
| …  | …              |   …   |
```

---

以上のタスクを完了後、フェーズ 6（内部レビュー）へ移行してください。
